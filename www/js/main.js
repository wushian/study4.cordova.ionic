angular.module("starter",["ionic","starter.controllers","ngCordova"]).run(function(e,t){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).config(function(e,t){e.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.about",{url:"/about",views:{menuContent:{templateUrl:"templates/about.html",controller:"AboutCtrl"}}}).state("app.events",{url:"/events",views:{menuContent:{templateUrl:"templates/events.html",controller:"EventsCtrl"}}}).state("app.event",{url:"/event/:id",views:{menuContent:{templateUrl:"templates/event.html",controller:"EventCtrl"}}}).state("app.feedback",{url:"/feedback",views:{menuContent:{templateUrl:"templates/feedback.html",controller:"FeedbackCtrl"}}}).state("app.info",{url:"/info",views:{menuContent:{templateUrl:"templates/info.html",controller:"InfoCtrl"}}}),t.otherwise("/app/about")}),angular.module("starter.controllers",[]).controller("AppCtrl",function(e,t,o){e.loginData={},t.fromTemplateUrl("templates/login.html",{scope:e}).then(function(t){e.modal=t}),e.closeLogin=function(){e.modal.hide()},e.login=function(){e.modal.show()},e.doLogin=function(){console.log("Doing login",e.loginData),o(function(){e.closeLogin()},1e3)}}).controller("AboutCtrl",function(e,t,o){}).controller("EventsCtrl",function(e,t,o,n,a,l,r){e.loading=!0,e.getEvents=function(){t.get("http://study4oct.azurewebsites.net/v1/events").success(function(t){e.events=t.data,l.info(t.data),e.loading=!1,e.$broadcast("scroll.refreshComplete")})},e.getEvents(),e.detail=function(e){o.event=e,a.go("app.event",{id:e.id})}}).controller("EventCtrl",function(e,t,o){o.info(t.id)}).controller("FeedbackCtrl",function(e,t,o,n,a){e.loading=!1,e.feedback={skill:0,eventContent:0,speaker:0,eventOverall:0,suggest:"",future:""},e.options=[{text:"非常不滿意",value:1},{text:"不滿意",value:2},{text:"普通",value:3},{text:"滿意",value:4},{text:"非常滿意",value:5}],e.submit=function(o){e.show(),t.post("http://study4oct.azurewebsites.net/v1/feedback",o).then(function(t){e.hide(),e.showAlert(t.data.message)},function(t){e.showAlert(response.data.message),e.hide()})},e.showAlert=function(e){n.alert({title:"Message",template:e})},e.show=function(){o.show({template:"讀取中..."})},e.hide=function(){o.hide()}}).controller("InfoCtrl",function(e,t,o,n,a){e.appDevice={},document.addEventListener("deviceready",function(){e.appDevice.device=t.getDevice(),e.appDevice.cordova=t.getCordova(),e.appDevice.model=t.getModel(),e.appDevice.platform=t.getPlatform(),e.appDevice.uuid=t.getUUID(),e.appDevice.version=t.getVersion();var l={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:100,targetHeight:100,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1,correctOrientation:!0};e.takePicture=function(){o.getPicture(l).then(function(e){var t=document.getElementById("myImage");t.src="data:image/jpeg;base64,"+e},function(e){})},e.takeBarcode=function(){n.scan().then(function(t){e.barcodeData=t,a.info("Barcode..."+t)},function(e){a.info("Barcode..."+e)})}},!1)});